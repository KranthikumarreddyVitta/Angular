<div class="service-req" fxFlex>
  <div fxLayout="row" class="service-req__heading">
    <div class="h1">SERVICE REQUEST</div>
    <span fxFlex></span>
    <button
      *ngIf="addRequest"
      (click)="addRequest = !addRequest"
      mat-flat-button
      color="primary"
    >
      ADD NEW REQUEST
    </button>
  </div>
  <div
    *ngIf="!addRequest"
    class="service-req__heading"
    fxLayout="row wrap"
    fxLayoutGap="1rem"
  >
    <div
      fxFlex="45"
      class="comp-info__ele"
      fxLayout="column"
      fxLayoutGap="1rem"
    >
      <mat-label class="cre-label">Order</mat-label>
      <mat-form-field appearance="outline">
        <mat-select [(ngModel)]="selectedOrder" placeholder="Select orders">
          <ng-container *ngFor="let order of orderList">
            <mat-option [value]="order.order_reference">{{
              order.order_reference
            }}</mat-option>
          </ng-container>
          <mat-option *ngIf="orderList.length === 0" value="">
            No Order</mat-option
          >
        </mat-select>
      </mat-form-field>
    </div>
    <div
      fxFlex="45"
      class="comp-info__ele"
      fxLayout="column"
      fxLayoutGap="1rem"
    >
      <mat-label class="cre-label">Subjects</mat-label>
      <mat-form-field appearance="outline">
        <mat-select [(ngModel)]="selectedSubject" placeholder="Select subject">
          <ng-container *ngFor="let subject of subjectList">
            <mat-option [value]="subject.value">{{ subject.name }}</mat-option>
          </ng-container>
          <mat-option *ngIf="subjectList.length === 0" value="">
            No Subject</mat-option
          >
        </mat-select>
      </mat-form-field>
    </div>
    <div
      fxFlex="60"
      class="comp-info__ele"
      fxLayout="column"
      fxLayoutGap="1rem"
    >
      <mat-label class="cre-label">Message</mat-label>
      <mat-form-field appearance="outline">
        <input
          [(ngModel)]="message"
          placeholder="Explain to us what happened and weâ€™ll get back to you as soon as possible."
          type="text"
          matInput
        />
      </mat-form-field>
    </div>
    <div
      fxFlex="80"
      fxLayoutAlign="center center"
      class="comp-info__ele"
      fxLayout="row"
      fxLayoutGap="1rem"
    >
      <button
        mat-flat-button
        [disabled]="!selectedOrder && !selectedSubject"
        color="accent"
        (click)="submit()"
      >
        SUBMIT
      </button>
      <button mat-flat-button (click)="addRequest = true" color="primary">
        CANCEL
      </button>
    </div>
  </div>

  <ag-grid-angular
    *ngIf="addRequest"
    [gridOptions]="gridOptions"
    style="height: 400px; width: 100%"
    class="ag-theme-alpine no-shadow"
    [rowData]="rowData | async"
    [defaultColDef]="defaultColDef"
    [columnDefs]="columnDefs"
  >
  </ag-grid-angular>
</div>
