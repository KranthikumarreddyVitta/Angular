<div
  class="product"
  fxLayoutGap="1rem"
  fxLayout="column"
  fxLayoutAlign=" stretch"
  [ngClass]="{ 'dialog-padding': forDialog }"
>
  <div
    class="product-details"
    *ngIf="forDialog"
    fxLayout="row"
    fxFlex="100"
    fxLayoutGap="1rem"
    fxLayoutAlign="space-between center"
    style="margin-bottom: 0rem !important"
  >
    <!-- <div [ngClass]="{ 'product-details-title': !forDialog }" fxFlex="95">
      {{ productdetails?.name }} -
      {{ productdetails?.variations[activeIndex]?.sgid }}
    </div> -->
    <ng-container *ngIf="forDialog">
      <span class="product_variation_header"
        >{{ productdetails?.name }} -
        {{ productdetails?.variations[activeIndex]?.sgid }}</span
      >
    </ng-container>
    <div fxLayout="row-reverse">
      <button
        type="button"
        class="close"
        data-dismiss="modal"
        (click)="closeModal()"
      >
        &times;
      </button>
    </div>
  </div>
  <div fxLayout="row" fxLayoutGap="1rem" class="h2">
    <ng-container *ngIf="!forDialog">
      <mat-icon style="cursor: pointer" (click)="back()"> arrow_back </mat-icon>
      <span class="product_variation_header"
        >Dashboard/Product/ {{ productdetails?.name }}</span
      >
    </ng-container>
  </div>
  <mat-divider></mat-divider>
  <div
    class="product-details"
    fxLayout="row"
    fxFlex="100"
    fxLayoutGap="1rem"
    fxLayoutAlign="stretch"
  >
    <div
      class="left"
      fxFlex="45"
      fxLayoutGap="1rem"
      fxLayout="column"
      fxLayoutAlign="start  stretch"
    >
      <div
        fxLayout="column"
        fxLayoutAlign="center center"
        style="height: 375px"
        class="product-image"
      >
        <img
          style="max-width: 250px; max-height: 100%"
          class="img"
          src="{{
            productdetails?.variations[activeIndex]?.default_images[0]
              ?.image_url.large
          }}"
          alt="{{ productdetails?.name }}"
        />
        <app-image-slider
          [list]="productdetails?.variations"
          [imgKey]="'default_images[0].image_url.small'"
          (onChange)="variationChange($event)"
          class="image-slider"
        ></app-image-slider>
      </div>
      <mat-accordion class="example-headers-align" multi>
        <mat-expansion-panel
          class="no-box-shadow"
          (opened)="panelOpenState = true"
          (closed)="panelOpenState = false"
        >
          <mat-expansion-panel-header>
            <mat-panel-title> Feature And Description </mat-panel-title>
          </mat-expansion-panel-header>
          <p [innerHTML]="featuresAndDescription"></p>
        </mat-expansion-panel>
      </mat-accordion>

      <!-- <mat-accordion class="example-headers-align" multi>
        <mat-expansion-panel
          class="no-box-shadow"
          (opened)="panelOpenState = true"
          (closed)="panelOpenState = false"
        >
          <mat-expansion-panel-header>
            <mat-panel-title> Features </mat-panel-title>
          </mat-expansion-panel-header>
          <p>{{ productdetails?.features }}</p>
        </mat-expansion-panel>
      </mat-accordion> -->
      <mat-accordion class="example-headers-align" multi>
        <mat-expansion-panel
          class="no-box-shadow"
          (opened)="panelOpenState = true"
          (closed)="panelOpenState = false"
        >
          <mat-expansion-panel-header>
            <mat-panel-title> Dimensions </mat-panel-title>
          </mat-expansion-panel-header>
          <p>{{ productdetails?.variations[activeIndex]?.dimension }}</p>
        </mat-expansion-panel>
      </mat-accordion>
      <!-- <mat-card>
        <div
          fxLayout="row wrap"
          fxLayoutAlign="stretch"
          class="variations__img"
        >
          <div
            class="img-class"
            fxFlex="22"
            (click)="variationChange(imgSrc)"
            *ngFor="let imgSrc of productdetails?.variations"
            [ngClass]="{ 'selected-variation': imgSrc.sgid == variationId }"
          >
            <img
              width="100%"
              height="100%"
              class="img"
              src="{{ imgSrc.default_images[0]?.image_url.large }}"
              alt="{{ productdetails?.name }}"
            />
          </div>
        </div>
      </mat-card> -->
    </div>
    <div fxFlex="55" fxLayout="column" fxLayoutAlign="start stretch">
      <div
        class="product-details__right"
        fxLayout="row wrap"
        [ngClass]="{ 'padding-modal': forDialog == true }"
        fxLayoutAlign="flex-start"
      >
        <div
          class="row"
          fxLayout="row wrap"
          fxFlex="100"
          fxLayoutAlign="center center"
        >
          <div
            class="column value product-details_header"
            fxFlex="100"
            fxLayoutAlign="center center"
          >
            {{ productdetails?.name }}
          </div>
        </div>
        <div
          class="row"
          class="price-block"
          fxLayout="row wrap"
          fxFlex="100"
          fxLayoutAlign="space-evenly center"
        >
          <div
            class="price-block_rental icon"
            [ngClass]="{ active: selectedType == '0' }"
            (click)="changeSelectedType('RENT')"
          >
            <h3>{{ rentalPrice | currency }}</h3>
            <p>Rental Price</p>
            <p>(12 months)</p>
          </div>
          <div class="vertical"></div>
          <div
            class="price-block_buy icon"
            [ngClass]="{ active: selectedType == '1' }"
            (click)="changeSelectedType('BUY')"
          >
            <h3>
              {{ productdetails?.variations[activeIndex]?.buyPrice | currency }}
            </h3>
            <p>Purchase Price</p>
          </div>
        </div>
        <div
          class="row"
          fxLayout="wrap"
          fxFlex="100"
          style="margin-bottom: 1rem"
          fxLayoutAlign="flex-start"
        >
          <div
            class="column label"
            fxLayout="column"
            fxFlex="30"
            fxLayoutAlign="center start"
          >
            Rent Duration:
          </div>
          <div
            class="column"
            fxLayout="row"
            fxFlex="70"
            fxLayoutAlign="space-evenly center"
          >
            <!-- <input
                                fxFlex
                                class="range-slider__range"
                                type="range"
                                value="{{ monthNums }}"
                                min="1"
                                max="36"
                                (change)="updateRent($event)"
                              /> -->
            <mat-slider
              fxFlex
              min="1"
              max="36"
              step="1"
              [(ngModel)]="monthNums"
              (input)="updateRent($event.value)"
            >
            </mat-slider>
            <mat-form-field fxFlex="15" appearance="outline">
              <input matInput [(ngModel)]="monthNums" type="text" />
            </mat-form-field>

            <!-- <span class="range-slider__value">{{ monthNums }}</span> -->
          </div>
        </div>
        <div
          fxFlex
          fxLayout="row"
          class="column"
          fxLayoutAlign="flex-start center"
          style="padding-top: 0.1rem"
        >
          <span style="padding-right: 2rem" class="label"> Quantity : </span>
          <app-counter
            [(counter)]="quantityCounter"
            fxFlex="30"
            [customCss]="true"
            [readOnly]="true"
          ></app-counter>
        </div>
        <!-- <div
          class="row"
          fxLayout="row wrap"
          fxFlex="100"
          fxLayoutAlign="flex-start"
        >
          <div
            class="column label"
            fxLayout="column"
            fxFlex="40"
            fxLayoutAlign="flex-start"
          >
            Category:
          </div>
          <div
            class="column value"
            fxLayout="column"
            fxFlex="58"
            fxLayoutAlign="flex-start"
          >
            {{ productdetails?.category?.category_name }}
          </div>
        </div> -->
        <div
          class="row"
          fxLayout="row wrap"
          fxFlex="100"
          style="margin-top: 1rem; margin-bottom: 2rem"
          fxLayoutAlign="flex-start"
        >
          <div
            class="column label"
            fxLayout="column"
            fxFlex="20"
            fxLayoutAlign="center start"
          >
            City:
          </div>
          <div
            class="column"
            fxLayout="column"
            fxFlex="45"
            fxLayoutAlign="flex-start"
          >
            <!-- <mat-form-field appearance="outline">
              <mat-select (selectionChange)="cityChange($event)" [(value)]="
                        productdetails?.variations[activeIndex]
                          ?.warehouse_location_new[0].warehouse_id
                      ">
                <mat-option *ngFor="let city of productdetails?.warehouses" [value]="city.warehouse_id">{{ city.warehouse_name
                  }}</mat-option>
              </mat-select>
        
            </mat-form-field> -->

            <select
              class="grey"
              (change)="cityChange($event)"
              [(ngModel)]="
                productdetails?.variations[activeIndex]
                  ?.warehouse_location_new[0].warehouse_id
              "
              fxFlex
            >
              <option
                *ngFor="let city of productdetails?.warehouses"
                [value]="city.warehouse_id"
              >
                {{ city.warehouse_name }}
              </option>
            </select>
          </div>
          <div
            class="column"
            fxLayout="column"
            fxFlex="35"
            fxLayoutAlign="center center"
          >
            <div>
              <p>Available Qty: {{ totalQty }}</p>
            </div>
          </div>
        </div>
        <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="1rem">
          <button
            class="add-button round_button label"
            mat-flat-button
            color="accent"
          >
            ADD TO CART
          </button>
          <button
            class="add-button round_button label"
            mat-flat-button
            color="accent"
            (click)="addItemToMoodboard()"
            *ngIf="!forDialog"
          >
            ADD TO MOODBOARD
          </button>
          <button
            class="add-button round_button label"
            mat-flat-button
            (click)="addItemToQuote()"
            color="accent"
            *ngIf="!forDialog"
          >
            ADD TO QUOTE
          </button>
        </div>
        <div
          fxLayout="row"
          fxFlex="auto"
          fxLayoutAlign="center center"
          *ngIf="forDialog"
        >
          <button
            class="add-button round_button label"
            mat-flat-button
            color="accent"
            (click)="addProductToMoodboard()"
            *ngIf="forDialog"
          >
            ADD TO MOODBOARD
          </button>
        </div>
      </div>
     
      <!-- <ng-container *ngIf="forDialog">
        <div
          class="product-details__right"
          fxLayout="column"
          style="padding: 40px"
        >
          <div
            fxFlex
            fxLayout="row"
            fxLayoutAlign="start center"
            fxLayout="row wrap"
            fxFlex="100"
            fxLayoutAlign="flex-start center"
            style="padding-top: 0.1rem"
          >
            <span style="padding-right: 1rem"> Quantity : </span>
            <app-counter
              [(counter)]="quantityCounter"
              fxFlex="20"
              [readOnly]="true"
              [customCss]="true"
            ></app-counter>
          </div>
          <div
            fxFlex
            fxLayout="row"
            fxLayoutAlign="start center"
            fxLayoutGap="1rem"
            style="padding-top: 2rem"
          >
            <button
              mat-raised-button
              type="button"
              class="summary_btn_position"
              color="accent"
              aria-label=""
              (click)="rentMoodboard()"
            >
              RENT
            </button>
            <button
              mat-raised-button
              type="button"
              class="summary_btn_position"
              color="accent"
              aria-label=""
              (click)="buyMoodboard()"
            >
              BUY
            </button>
          </div>
        </div>
      </ng-container> -->
    </div>
  </div>
</div>
