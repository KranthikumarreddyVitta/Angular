<div
  class="product"
  fxLayoutGap="1rem"
  fxLayout="column"
  fxLayoutAlign=" stretch"
>
  <div class="product-details" *ngIf="forDialog" fxLayout="row" fxFlex="100" fxLayoutGap="1rem">
    <!-- <div [ngClass]="{ 'product-details-title': !forDialog }" fxFlex="95">
      {{ productdetails?.name }} -
      {{ productdetails?.variations[activeIndex]?.sgid }}
    </div> -->
    <span fxFlex></span>
    <div fxLayout="row-reverse">
      <button
        
        type="button"
        class="close"
        data-dismiss="modal"
        (click)="closeModal()"
      >
        &times;
      </button>
    </div>
  </div>
  <div
    class="product-details"
    fxLayout="row"
    fxFlex="100"
    fxLayoutGap="1rem"
    fxLayoutAlign="stretch"
  >
    <div
      class="left"
      fxFlex="40"
      fxLayoutGap="2rem"
      fxLayout="column"
      fxLayoutAlign="start  stretch"
    >
      <mat-card style="height: 500px">
        <img
          height="100%"
          width="100%"
          class="img"
          src="{{
            productdetails?.variations[activeIndex]?.default_images[0]
              ?.image_url.large
          }}"
          alt="{{ productdetails?.name }}"
        />
      </mat-card>
      <mat-card>
        <div
          fxLayout="row wrap"
          fxLayoutAlign="stretch"
          class="variations__img"
        >
          <div
            class="img-class"
            fxFlex="22"
            (click)="variationChange(imgSrc)"
            *ngFor="let imgSrc of productdetails?.variations"
            [ngClass]="{ 'selected-variation': imgSrc.sgid == variationId }"
          >
            <img
              width="100%"
              height="100%"
              class="img"
              src="{{ imgSrc.default_images[0]?.image_url.large }}"
              alt="{{ productdetails?.name }}"
            />
          </div>
        </div>
      </mat-card>
    </div>
    <div
      class="right"
      fxFlex="58"
      fxLayoutGap="2rem"
      fxLayout="column"
      fxLayoutAlign="start stretch"
    >
      <mat-card fxLayout="row wrap" fxLayoutAlign="flex-start">
        <div
          class="row"
          fxLayout="row wrap"
          fxFlex="100"
          fxLayoutAlign="flex-start"
        >
          <div class="column label" fxFlex="40" fxLayoutAlign="flex-start">
            Product Name:
          </div>
          <div class="column value" fxFlex="58" fxLayoutAlign="flex-start">
            {{ productdetails?.name }}
          </div>
        </div>
        <div
          class="row"
          fxLayout="row wrap"
          fxFlex="100"
          fxLayoutAlign="flex-start"
        >
          <div
            class="column label"
            fxLayout="column"
            fxFlex="40"
            fxLayoutAlign="flex-start"
          >
            Category:
          </div>
          <div
            class="column value"
            fxLayout="column"
            fxFlex="58"
            fxLayoutAlign="flex-start"
          >
            {{ productdetails?.category?.category_name }}
          </div>
        </div>
        <div
          class="row"
          fxLayout="row wrap"
          fxFlex="100"
          fxLayoutAlign="flex-start"
        >
          <div
            class="column label"
            fxLayout="column"
            fxFlex="40"
            fxLayoutAlign="flex-start"
          >
            Purchase Price:
          </div>
          <div
            class="column value"
            fxLayout="column"
            fxFlex="58"
            fxLayoutAlign="flex-start"
          >
            {{ productdetails?.variations[activeIndex]?.buyPrice | currency }}
          </div>
        </div>
        <div
          class="row"
          fxLayout="row wrap"
          fxFlex="100"
          fxLayoutAlign="flex-start"
        >
          <div
            class="column label"
            fxLayout="column"
            fxFlex="40"
            fxLayoutAlign="flex-start"
          >
            Rental Price/12 month:
          </div>
          <div
            class="column value"
            fxLayout="column"
            fxFlex="58"
            fxLayoutAlign="flex-start"
          >
            {{ rentalPrice | currency }}
          </div>
        </div>
        <div
          class="row"
          fxLayout="row wrap"
          fxFlex="100"
          fxLayoutAlign="flex-start"
        >
          <div
            class="column lable"
            fxLayout="column"
            fxFlex="40"
            fxLayoutAlign="flex-start"
          >
            Available Qty:
          </div>
          <div
            class="column value"
            fxLayout="column"
            fxFlex="58"
            fxLayoutAlign="flex-start"
          >
            {{ totalQty }}
          </div>
        </div>
        <div
          class="row"
          fxLayout="row wrap"
          fxFlex="100"
          fxLayoutAlign="flex-start"
        >
          <div
            class="column label"
            fxLayout="column"
            fxFlex="40"
            fxLayoutAlign="flex-start"
          >
            Rent Duration:
          </div>
          <div
            class="column"
            fxLayout="row"
            fxFlex="58"
            fxLayoutAlign="flex-start"
          >
            <input
              fxFlex
              class="range-slider__range"
              type="range"
              value="{{ monthNums }}"
              min="1"
              max="36"
              (change)="updateRent($event)"
            />
            <span class="range-slider__value">{{ monthNums }}</span>
          </div>
        </div>
        <div
          class="row"
          fxLayout="row wrap"
          fxFlex="100"
          fxLayoutAlign="flex-start"
        >
          <div
            class="column lable"
            fxLayout="column"
            fxFlex="40"
            fxLayoutAlign="center start"
          >
            City:
          </div>
          <div
            class="column"
            fxLayout="column"
            fxFlex="58"
            fxLayoutAlign="flex-start"
          >
            <mat-form-field fxFlex appearance="outline">
              <mat-select
                (selectionChange)="cityChange($event)"
                [(value)]="
                  productdetails?.variations[activeIndex]
                    ?.warehouse_location_new[0].warehouse_id
                "
              >
                <mat-option
                  *ngFor="let city of productdetails?.warehouses"
                  [value]="city.warehouse_id"
                  >{{ city.warehouse_name }}</mat-option
                >
              </mat-select>
            </mat-form-field>
          </div>
        </div>
      </mat-card>
      <mat-accordion class="example-headers-align" multi>
        <mat-expansion-panel
          (opened)="panelOpenState = true"
          (closed)="panelOpenState = false"
        >
          <mat-expansion-panel-header>
            <mat-panel-title> Description </mat-panel-title>
          </mat-expansion-panel-header>
          <p>
            {{ productdetails?.description }}
          </p>
        </mat-expansion-panel>
      </mat-accordion>

      <mat-accordion class="example-headers-align" multi>
        <mat-expansion-panel
          (opened)="panelOpenState = true"
          (closed)="panelOpenState = false"
        >
          <mat-expansion-panel-header>
            <mat-panel-title> Features </mat-panel-title>
          </mat-expansion-panel-header>
          <p>{{ productdetails?.features }}</p>
        </mat-expansion-panel>
      </mat-accordion>
      <mat-accordion class="example-headers-align" multi>
        <mat-expansion-panel
          (opened)="panelOpenState = true"
          (closed)="panelOpenState = false"
        >
          <mat-expansion-panel-header>
            <mat-panel-title> Dimensions </mat-panel-title>
          </mat-expansion-panel-header>
          <p>{{ productdetails?.variations[activeIndex]?.dimension }}</p>
        </mat-expansion-panel>
      </mat-accordion>
    </div>
  </div>
  <div *ngIf="forMoodboard || forQuote" fxFlex class="add-item">
    <mat-card
      fxLayout="row wap"
      fxLayoutAlign="center  center"
      fxLayoutGap="2rem"
    >
      <div fxLayout="row" fxLayoutGap="2rem">
        <mat-radio-group
          fxLayout="row"
          fxLayoutAlign="start center"
          [(ngModel)]="selectedType"
        >
          <mat-radio-button style="padding-right: 2rem" value="0">
            Rent
          </mat-radio-button>
          <mat-radio-button value="1"> Buy </mat-radio-button>
        </mat-radio-group>
        <div
          fxFlex
          fxLayout="row"
          fxLayoutAlign="start center"
          style="padding-top: 0.1rem"
        >
          <span style="padding-right: 2rem"> Qty : </span>
          <app-counter
            [(counter)]="quantityCounter"
            fxFlex="30"
            [readOnly]="true"
          ></app-counter>
        </div>
      </div>
      <div
        *ngIf="forHitler || forMoodboard"
        [fxLayout]="forHitler ? 'row' : 'column'"
        fxLayoutAlign="center  center"
      >
        <mat-form-field *ngIf="!forHitler" fxFlex appearance="outline">
          <mat-label>Select Moodboard</mat-label>
          <mat-select
            [disabled]="this.data?.moodboardId"
            [(ngModel)]="selectedMoodboard"
          >
            <mat-option
              *ngFor="let moodboard of moodboardList"
              [value]="moodboard.id"
              >{{ moodboard.id + " - " + moodboard.boardname }}</mat-option
            >
            <mat-option *ngIf="moodboardList.length === 0" value=""
              >No Moodborad</mat-option
            >
          </mat-select>
        </mat-form-field>
        <!-- <button
            style="margin-top: 0.5rem"
            mat-icon-button
            color="primary"mb
            aria-label="Example icon button with a home icon"
          >
            <mat-icon title="Add new quote">add</mat-icon>
          </button> -->
        <div *ngIf="forHitler" style="padding: 0.5rem">
          Add to <span style="font-weight: bold;">{{ data?.mb?.boardname }}</span>
        </div>
        <div fxLayoutAlign="center center">
          <button mat-flat-button (click)="addItemToMoodboard()" color="accent">
            Add {{ forHitler ? "" : " to Moodboard" }}
          </button>
        </div>
      </div>
      <div *ngIf="forQuote" fxLayout="column">
        <div fxLayout="row">
          <mat-form-field fxFlex appearance="outline">
            <mat-label>Select Quote</mat-label>
            <mat-select [(ngModel)]="selectedQuote">
              <mat-option
                *ngFor="let quote of quoteList"
                [value]="quote.sgid"
                >{{ quote.sgid + " - " + quote.name }}</mat-option
              >
              <mat-option *ngIf="quoteList.length === 0" value=""
                >No Quotes</mat-option
              >
            </mat-select>
          </mat-form-field>
          <button
            style="margin-top: 0.5rem"
            mat-icon-button
            color="primary"
            (click)="createNewQuote()"
            aria-label="Example icon button with a home icon"
          >
            <mat-icon title="Create new quote">add</mat-icon>
          </button>
        </div>
        <div fxLayoutAlign="center center">
          <button
            [disabled]="quoteList.length === 0"
            mat-flat-button
            (click)="addItemToQuote()"
            color="accent"
          >
            Add to Quote
          </button>
        </div>
      </div>
    </mat-card>
  </div>
</div>
