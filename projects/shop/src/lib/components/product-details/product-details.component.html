<div
  class="product"
  fxLayoutGap="1rem"
  fxLayout="column"
  fxLayoutAlign=" stretch" [ngClass]="{'dialog-padding' : forDialog}"
>
  <div
    class="product-details"
    *ngIf="forDialog"
    fxLayout="row"
    fxFlex="100"
    fxLayoutGap="1rem" fxLayoutAlign="space-between center" style="margin-bottom: 0rem !important;"
  >
    <!-- <div [ngClass]="{ 'product-details-title': !forDialog }" fxFlex="95">
      {{ productdetails?.name }} -
      {{ productdetails?.variations[activeIndex]?.sgid }}
    </div> -->
    <ng-container *ngIf="forDialog" class="h2">
      <span class="product_variation_header">{{ productdetails?.name }} -
        {{ productdetails?.variations[activeIndex]?.sgid }}</span>
    </ng-container>
    <div fxLayout="row-reverse">
      <button
        type="button"
        class="close"
        data-dismiss="modal"
        (click)="closeModal()"
      >
        &times;
      </button>
    </div>
  </div>
  <div fxLayout="row" fxLayoutGap="1rem" class="h2">
    <ng-container *ngIf="!forDialog">
      <mat-icon (click)="back()"> arrow_back </mat-icon>
      <span>Dashboard/Product/ {{ productdetails?.name }}</span>
    </ng-container>
  </div>
  <mat-divider></mat-divider>
  <div
    class="product-details"
    fxLayout="row"
    fxFlex="100"
    fxLayoutGap="1rem"
    fxLayoutAlign="stretch"
  >
    <div
      class="left"
      fxFlex="50"
      fxLayoutGap="2rem"
      fxLayout="column"
      fxLayoutAlign="start  stretch"
    >
      <div fxLayout="column" fxLayoutAlign="center center" class="product-image">
        <img
          height="350px"
          class="img"
          src="{{
            productdetails?.variations[activeIndex]?.default_images[0]
              ?.image_url.large
          }}"
          alt="{{ productdetails?.name }}"
        />
        <app-image-slider [list]="productdetails?.variations" [imgKey]="'default_images[0].image_url.small'" (onChange)="variationChange($event)" class="image-slider"></app-image-slider>
      </div>
      <mat-accordion class="example-headers-align" multi>
        <mat-expansion-panel
          class="no-box-shadow"
          (opened)="panelOpenState = true"
          (closed)="panelOpenState = false"
        >
          <mat-expansion-panel-header>
            <mat-panel-title> Description </mat-panel-title>
          </mat-expansion-panel-header>
          <p>
            {{ productdetails?.description }}
          </p>
        </mat-expansion-panel>
      </mat-accordion>

      <mat-accordion class="example-headers-align" multi>
        <mat-expansion-panel
          class="no-box-shadow"
          (opened)="panelOpenState = true"
          (closed)="panelOpenState = false"
        >
          <mat-expansion-panel-header>
            <mat-panel-title> Features </mat-panel-title>
          </mat-expansion-panel-header>
          <p>{{ productdetails?.features }}</p>
        </mat-expansion-panel>
      </mat-accordion>
      <mat-accordion class="example-headers-align" multi>
        <mat-expansion-panel
          class="no-box-shadow"
          (opened)="panelOpenState = true"
          (closed)="panelOpenState = false"
        >
          <mat-expansion-panel-header>
            <mat-panel-title> Dimensions </mat-panel-title>
          </mat-expansion-panel-header>
          <p>{{ productdetails?.variations[activeIndex]?.dimension }}</p>
        </mat-expansion-panel>
      </mat-accordion>
      <!-- <mat-card>
        <div
          fxLayout="row wrap"
          fxLayoutAlign="stretch"
          class="variations__img"
        >
          <div
            class="img-class"
            fxFlex="22"
            (click)="variationChange(imgSrc)"
            *ngFor="let imgSrc of productdetails?.variations"
            [ngClass]="{ 'selected-variation': imgSrc.sgid == variationId }"
          >
            <img
              width="100%"
              height="100%"
              class="img"
              src="{{ imgSrc.default_images[0]?.image_url.large }}"
              alt="{{ productdetails?.name }}"
            />
          </div>
        </div>
      </mat-card> -->
    </div>
    <div fxFlex="50" fxLayout="column" fxLayoutAlign="start stretch">
      <div
        class="product-details__right"
        fxLayout="row wrap"
        fxLayoutAlign="flex-start"
      >
        <div
          class="row"
          fxLayout="row wrap"
          fxFlex="100"
          fxLayoutAlign="flex-start"
        >
          <div class="column label" fxFlex="40" fxLayoutAlign="flex-start">
            Product Name:
          </div>
          <div class="column value" fxFlex="58" fxLayoutAlign="flex-start">
            {{ productdetails?.name }}
          </div>
        </div>
        <div
          class="row"
          fxLayout="row wrap"
          fxFlex="100"
          fxLayoutAlign="flex-start"
        >
          <div
            class="column label"
            fxLayout="column"
            fxFlex="40"
            fxLayoutAlign="flex-start"
          >
            Category:
          </div>
          <div
            class="column value"
            fxLayout="column"
            fxFlex="58"
            fxLayoutAlign="flex-start"
          >
            {{ productdetails?.category?.category_name }}
          </div>
        </div>
        <div
          class="row"
          fxLayout="row wrap"
          fxFlex="100"
          fxLayoutAlign="flex-start"
        >
          <div
            class="column label"
            fxLayout="column"
            fxFlex="40"
            fxLayoutAlign="flex-start"
          >
            Purchase Price:
          </div>
          <div
            class="column value"
            fxLayout="column"
            fxFlex="58"
            fxLayoutAlign="flex-start"
          >
            {{ productdetails?.variations[activeIndex]?.buyPrice | currency }}
          </div>
        </div>
        <div
          class="row"
          fxLayout="row wrap"
          fxFlex="100"
          fxLayoutAlign="flex-start"
        >
          <div
            class="column label"
            fxLayout="column"
            fxFlex="40"
            fxLayoutAlign="flex-start"
          >
            Rental Price/12 month:
          </div>
          <div
            class="column value"
            fxLayout="column"
            fxFlex="58"
            fxLayoutAlign="flex-start"
          >
            {{ rentalPrice | currency }}
          </div>
        </div>
        <div
          class="row"
          fxLayout="row wrap"
          fxFlex="100"
          fxLayoutAlign="flex-start"
        >
          <div
            class="column label"
            fxLayout="column"
            fxFlex="40"
            fxLayoutAlign="flex-start"
          >
            Available Qty:
          </div>
          <div
            class="column value"
            fxLayout="column"
            fxFlex="58"
            fxLayoutAlign="flex-start"
          >
            {{ totalQty }}
          </div>
        </div>
        <div
          class="row"
          fxLayout="row wrap"
          fxFlex="100"
          fxLayoutAlign="flex-start center"
        >
          <div
            class="column label"
            fxLayout="column"
            fxFlex="40"
            fxLayoutAlign="flex-start"
          >
            Rent Duration:
          </div>
          <div
            class="column"
            fxLayout="row"
            fxFlex="58"
            fxLayoutAlign="flex-start"
          >
            <!-- <input
              fxFlex
              class="range-slider__range"
              type="range"
              value="{{ monthNums }}"
              min="1"
              max="36"
              (change)="updateRent($event)"
            /> -->
            <mat-slider
              fxFlex
              min="1"
              max="36"
              step="1"
              [(ngModel)]="monthNums"  (input)="updateRent($event.value)"
            ></mat-slider>
            <mat-form-field fxFlex="15" appearance="outline">
              <input matInput [(ngModel)]="monthNums" type="text" />
            </mat-form-field>

            <!-- <span class="range-slider__value">{{ monthNums }}</span> -->
          </div>
        </div>
        <div
          class="row"
          fxLayout="row wrap"
          fxFlex="100"
          fxLayoutAlign="flex-start"
        >
          <div
            class="column label"
            fxLayout="column"
            fxFlex="40"
            fxLayoutAlign="center start"
          >
            City:
          </div>
          <div
            class="column"
            fxLayout="column"
            fxFlex="58"
            fxLayoutAlign="flex-start"
          >
            <mat-form-field fxFlex appearance="outline">
              <mat-select
                (selectionChange)="cityChange($event)"
                [(value)]="
                  productdetails?.variations[activeIndex]
                    ?.warehouse_location_new[0].warehouse_id
                "
              >
                <mat-option
                  *ngFor="let city of productdetails?.warehouses"
                  [value]="city.warehouse_id"
                  >{{ city.warehouse_name }}</mat-option
                >
              </mat-select>
            </mat-form-field>
            <!-- <select class="grey" (selectionChange)="cityChange($event)" [(ngModel)]="productdetails?.variations[activeIndex]
            ?.warehouse_location_new[0].warehouse_id"
           fxFlex>
              <option  *ngFor="let city of productdetails?.warehouses"  [value]="city.warehouse_id">{{ city.warehouse_name }}</option>
            </select> -->
          </div>
        </div>
      </div>
      <ng-container *ngIf = "!forDialog">
      <div
        *ngIf="forMoodboard || forQuote"
        fxLayout="row"
        fxLayoutGap="2rem"
        class="add-item__header"
      >
        <mat-radio-group
          fxLayout="row"
          fxLayoutAlign="start center"
          [(ngModel)]="selectedType"
        >
          <mat-radio-button style="padding-right: 2rem" value="0">
            Rent
          </mat-radio-button>
          <mat-radio-button value="1"> Buy </mat-radio-button>
        </mat-radio-group>
        <div
          fxFlex
          fxLayout="row"
          fxLayoutAlign="start center"
          style="padding-top: 0.1rem"
        >
          <span style="padding-right: 2rem"> Qty : </span>
          <app-counter
            [(counter)]="quantityCounter"
            fxFlex="30"
            [readOnly]="true" 
          ></app-counter>
        </div>
      </div>
      <div
        class="add-to-md"
        *ngIf="forHitler || forMoodboard"
        [fxLayout]="forHitler ? 'row' : 'column'"
        fxLayoutAlign="center  center"
      >
        <mat-label class="label pb_5">Add/Select Moodboard</mat-label>
        <div fxLayout="row" fxLayoutGap="1rem" fxLayoutAlign="start center">
          <div (click)="createNewMB()" class="add-to-md-button">
            <img  src="assets/shop/addButton.svg"/>
          </div>
          <!-- <mat-form-field *ngIf="!forHitler" fxFlex="50" appearance="outline">
            <mat-select
              [disabled]="this.data?.moodboardId"
              [(ngModel)]="selectedMoodboard"
            >
              <mat-option
                *ngFor="let moodboard of moodboardList"
                [value]="moodboard.id"
                >{{ moodboard.id + " - " + moodboard.boardname }}</mat-option
              >
              <mat-option *ngIf="moodboardList.length === 0" value=""
                >No Moodborad</mat-option
              >
            </mat-select>
          </mat-form-field> -->
          <select class="grey"  [disabled]="this.data?.moodboardId" [(ngModel)]="selectedMoodboard" fxFlex="50">
            <option  *ngIf="moodboardList.length === 0" value="" >No Moodborad</option>
            <option  *ngFor="let moodboard of moodboardList"  [value]="moodboard.id">{{ moodboard.id + " - " + moodboard.boardname }}</option>
          </select>
          <button fxFlex style="padding: 0.35rem !important;font-weight: 600 !important;"
            class="add-button round_button label"
            [disabled]="moodboardList.length === 0"
            mat-flat-button
            color="accent"
            (click)="addItemToMoodboard()"
          >
            ADD TO MOODBOARD
          </button>
        </div>

        <!-- <div *ngIf="forHitler" style="padding: 0.5rem">
          Add to
          <span style="font-weight: bold">{{ data?.mb?.boardname }}</span>
        </div> -->
      </div>
      <div *ngIf="forQuote" fxLayout="column" class="add-to-quote">
        <mat-label class="label pb_5">Add/Select Quote</mat-label>
        <div fxLayout="row" fxLayoutGap="1rem" fxLayoutAlign="start center">
          <div (click)="createNewQuote()"  class="add-to-quote-button">
            <img  src="assets/shop/addButton.svg"/>
          </div>
          <!-- <mat-form-field fxFlex="50" appearance="outline">
            <mat-select [(ngModel)]="selectedQuote">
              <mat-option
                *ngFor="let quote of quoteList"
                [value]="quote.sgid"
                >{{ quote.sgid + " - " + quote.name }}</mat-option
              >
              <mat-option *ngIf="quoteList.length === 0" value=""
                >No Quotes</mat-option
              >
            </mat-select>
          </mat-form-field> -->
          <select class="grey" [(ngModel)]="selectedQuote" fxFlex="50">
            <option  *ngIf="quoteList.length === 0" value="" value="">Select a Project</option>
            <option  *ngFor="let quote of quoteList"  [value]="quote.sgid">{{ quote.sgid + " - " + quote.name }}</option>
          </select>
          <button fxFlex style="padding: 0.35rem !important;font-weight: 600 !important;"
            class="add-button round_button label"
            [disabled]="quoteList.length === 0"
            mat-flat-button
            (click)="addItemToQuote()"
            color="accent"
          >
            ADD TO QUOTE
          </button>
        </div>
      </div>
    </ng-container>
    <ng-container *ngIf = "forDialog">
      <div class="product-details__right" fxLayout="column" style="padding: 40px;">
        <div fxFlex fxLayout="row" fxLayoutAlign="start center" fxLayout="row wrap" fxFlex="100" fxLayoutAlign="flex-start center"
          style="padding-top: 0.1rem">
          <span style="padding-right: 1rem"> Quantity : </span>
          <app-counter [(counter)]="quantityCounter" fxFlex="20" [readOnly]="true" [customCss]="true"></app-counter>
        </div>
        <div fxFlex fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="1rem" style="padding-top: 2rem">
          <button mat-raised-button type="button" class="summary_btn_position"
            color="accent" aria-label="" (click)="rentMoodboard()">RENT</button>
          <button mat-raised-button  type="button" class="summary_btn_position"
            color="accent" aria-label="" (click)="buyMoodboard()">BUY</button>
        </div>
      </div>
    </ng-container>
    </div>
  </div>
</div>
