<div class="mb" fxLayout="column" fxLayoutAlign=" stretch">
  <div class="mb-details" fxLayout="row" fxLayoutAlign=" stretch">
    <div
      class="mb-details__icon"
      fxFlex="30"
      fxLayout="column"
      fxLayoutAlign="center center"
    >
      <span class="text-upper">{{ bannerIconImgTxt }}</span>
      <div class="img-box">
        <img [src]="bannerIconImg" alt="{{ bannerIconImgTxt }}" srcset="" />
      </div>
    </div>
    <div
      class="mb-details__info"
      fxFlex="80"
      fxLayout="row wrap"
      fxLayoutAlign="start"
    >
      <div fxFlex="50" *ngIf="moodboardDetails?.moodboard">
        <span class="label">Project Name: </span>
        <span class="value">{{
          moodboardDetails?.moodboard?.project_name
        }}</span>
      </div>
      <div fxFlex="50">
        <span class="label">Company Name: </span>
        <span class="value">{{
          moodboardDetails?.moodboard?.company_name
        }}</span>
      </div>
      <div fxFlex="50">
        <span class="label">Moodboard#: </span>
        <span class="value">{{ moodboardDetails?.moodboard?.sgid }}</span>
      </div>
      <div fxFlex="50">
        <span class="label">Customer City: </span>
        <span class="value">{{ moodboardDetails?.moodboard?.city }}</span>
      </div>
      <div fxFlex="50">
        <span class="label">Moodboard Name: </span>
        <span class="value">{{ moodboardDetails?.moodboard?.boardname }}</span>
      </div>
      <div fxFlex="50">
        <span class="label">Zipcode: </span>
        <span class="value">{{ moodboardDetails?.moodboard?.zipcode }}</span>
      </div>

      <div fxFlex="60" fxLayoutGap="1rem">
        <button
          class="box-none"
          mat-mini-fab
          color="accent"
          (click)="copyMB()"
        >
          <mat-icon>file_copy</mat-icon>
        </button>
        <button
          class="box-none"
          mat-mini-fab
          color="accent"
          (click)="editMB()"
        >
          <mat-icon>edit icon</mat-icon>
        </button>
        <button
        class="box-none"
        mat-mini-fab
        color="accent"
        (click)="shareMB()"
      >
        <mat-icon>share icon</mat-icon>
      </button>
      </div>
    </div>
    <div
      class="mb-details__info"
      fxFlex="20"
      fxLayout="row wrap"
      fxLayoutAlign="start"
    >
      <div fxFlex="80">
        <ng-container *ngFor="let item of catagorydata; let i = index">
          <mat-card
            *ngIf="
              item.value == moodboardDetails?.moodboard?.moodboard_type_name
            "
            class="example-card"
          >
            <img
              mat-card-image
              src="{{ item.imageSrc }}"
              alt="{{ item.value }}"
            />
            <mat-card-content>
              <div
                fxLayout="row"
                class="text"
                fxLayoutGap="1rem"
                fxLayoutAlign="start center"
              >
                <div fxLayout="row" class="text-lable">{{ item.value }}</div>
              </div>
            </mat-card-content>
          </mat-card>
        </ng-container>
      </div>
    </div>
  </div>
</div>
<div>
  <mat-tab-group
    color="accent"
    class="tabs"
    mat-align-tabs="center"
    #tabsReference
  >
    <mat-tab label="MY MOODBOARD">
      <div
        class="mb-details margin-top30 moodeboard-section"
        fxLayout="column"
        fxLayoutGap="2rem"
        fxLayoutAlign="stretch"
      >
        <div
          class="head"
          fxFlex="100"
          fxLayout="row"
          fxLayoutAlign="space-between center"
        >
          <div
            class="head"
            fxLayout="row"
            fxLayoutGap="1rem"
            fxLayoutAlign="space-between center"
          >
            <button
              mat-button
              color="accent"
              class="btn-chip-label"
              aria-label=""
            >
              {{ moodboardDetails?.moodboard?.project_name }}
            </button>
            <button
              mat-button
              color="accent"
              aria-label=""
              class="btn-chip-label"
            >
              No of products :
              {{
                moodboardDetails?.moodboard_items
                  ? moodboardDetails?.moodboard_items.length
                  : "0"
              }}
            </button>
          </div>
          <div
            class="head"
            fxLayout="row"
            fxLayoutGap="1rem"
            fxLayoutAlign="space-between center"
          >
            <button
              mat-button
              color="accent"
              class="btn-chip-md"
              style="background-color: #2c2c2c; color: #fff"
              aria-label=""
              (click)="requestRendering()"
            >
              Request Rendering
            </button>
            <button
              mat-button
              color="accent"
              aria-label=""
              (click)="generateMDQuotePdf()"
              class="btn-chip-md"
            >
              Generate Moodboard quote PDF
            </button>
            <button
              mat-button
              color="accent"
              aria-label=""
              (click)="generateMDPdf()"
              class="btn-chip-md"
            >
              Generate Moodboard PDF
            </button>
          </div>
        </div>
        <div
          class="product-wrapper"
          fxLayout="row wrap"
          fxLayoutGap="1rem"
          fxLayoutGap="10px grid"
          fxLayoutAlign="start center"
        >
          <div class="">
            <div
              class="cardImg add"
              (click)="setProductTab(1)"
              style="min-height: 300px"
            >
              <div class="add-block">
                <img
                  class="add-icon"
                  src="assets/moodboard/images/addProduct.svg"
                />
                <div>ADD PRODUCT</div>
              </div>
            </div>
          </div>
          <ng-container
            *ngFor="
              let mbItem of moodboardDetails?.moodboard_items;
              let i = index
            "
          >
            <div class="">
              <div class="cardImg">
                <div class="badge" style="text-align: center; width: 40%">
                  {{ mbItem.button_type == 0 ? "Rent" : "Buy" }}
                </div>
                <img
                  src="{{ mbItem?.variation.images[0].image_url.large }}"
                  alt="{{ mbItem.name }}"
                />
                <div
                  class="title"
                  height="100px"
                  fxLayout="row"
                  fxLayoutAlign="center center"
                >
                  {{ mbItem.name }}
                </div>
                <div
                  class="action"
                  fxLayout="row"
                  fxLayoutAlign="center stretch"
                >
                  <app-counter
                    fxFlex="50"
                    [min]="1"
                    [readOnly]="true"
                    [max]="mbItem?.total_warehouse_quantity"
                    [counter]="mbItem?.qty"
                    (counterChange)="increaseQuantity($event, mbItem)"
                  ></app-counter>
                  <mat-icon
                    style="cursor: pointer; color: #a8a8a8"
                    *ngIf="userid == mbItem?.userid"
                    (click)="deleteItem(mbItem)"
                    >delete</mat-icon
                  >
                </div>
              </div>
            </div>
          </ng-container>
        </div>
        <div
          class="head margin-top30"
          fxLayout="row"
          fxLayoutAlign="space-between center"
        >
          <div
            class="head"
            fxLayout="row"
            fxLayoutGap="2rem"
            fxLayoutAlign="space-between center"
          >
            <select (change)="selectedQuote($event)">
              <option *ngFor="let qoute of mbQuotesList" [value]="qoute.sgid">
                {{ qoute.sgid }}-{{ qoute.name }}
              </option>
            </select>
            <div
              class="head"
              fxLayout="row"
              fxLayoutGap="1rem"
              fxLayoutAlign="space-between center"
            >
              <button
                (click)="addToQuote()"
                mat-button
                color="accent"
                class="btn-yellow-quote"
                aria-label=""
              >
                ADD TO QUOTE
              </button>
              <button
                mat-button
                color="accent"
                class="btn-yellow-quote"
                aria-label=""
                (click)="createNewQuote()"
              >
                CREATE NEW QUOTE
              </button>
              <button
              mat-flat-button
                color="accent"
                class="btn-yellow-quote"
                [disabled]="(this.moodboardDetails?.moodboard_items && this.moodboardDetails?.moodboard_items.length)
                ? false
                : true"
                aria-label=""
                (click)="addMoodboardToCart()"
              >
                ADD TO CART
              </button>
            </div>
          </div>
          <div
            class="head"
            fxLayout="row"
            fxLayoutAlign="space-between center"
          ></div>
        </div>
      </div>
    </mat-tab>
    <mat-tab label="ADD PRODUCTS">
      <lib-shop
        (productClick)="productDetails($event)"
        [source]="'MD'"
        [hLimit]="20"
      ></lib-shop>
    </mat-tab>
    <mat-tab disabled>
      <!-- <ng-template mat-tab-label>
        <button
          mat-raised-button
          type="button"
          class="summary_btn_position hide-box-shadow"
          (click)="scroll(mbsummary)"
          color="accent"
          aria-label=""
        >
          View Moodboard Summary
        </button>
      </ng-template> -->
    </mat-tab>
  </mat-tab-group>
</div>
<div
  class="mb-summary"
  #mbsummary
  fxLayout="column"
  fxLayoutAlign="start stretch"
>
  <!-- <div class="mb-summary__info" fxLayout="column" fxLayoutAlign="start start">
    <div><span class="mb-summary__info--value">MOODBOARD SUMMARY</span></div>
    <div
      class="mb-summary__info"
      fxLayout="row"
      fxLayoutAlign="start start"
      fxLayoutGap="2rem"
    >
      <div>
        <span class="mb-summary__info--label">Customer City :</span>
        <span class="mb-summary__info--value">
          {{ moodboardDetails?.moodboard?.city }}</span
        >
      </div>
      <div>
        <span class="mb-summary__info--label">Zipcode:</span>
        <span class="mb-summary__info--value">{{
          moodboardDetails?.moodboard?.zipcode
        }}</span>
      </div>
    </div>
  </div> -->
  <span id="refresh" (click)="refresh()"></span>
  <ag-grid-angular
    [gridOptions]="gridOptions"
    style="height: 600px; width: 100%; display: none;"
    class="ag-theme-alpine quotes-table"
    [rowData]="rowData | async"
    [frameworkComponents]="frameworkComponents"
    [pinnedBottomRowData]="pinnedBottomRowData"
    [defaultColDef]="defaultColDef"
    [columnDefs]="columnDefs"
  >
  </ag-grid-angular>
  <div
    class="mb-summary__actions"
    fxLayout="row"
    fxLayoutAlign="center"
    fxLayoutGap="2rem"
  >
    <ng-content [select]="actions"> </ng-content>
  </div>
</div>

<table
  class="table table-bordered edit-table bg-white d-none"
  style="display: none"
  id="printImage"
>
  <thead>
    <tr>
      <td>Image</td>
      <td>Name</td>
      <td>Dimension</td>
    </tr>
  </thead>
  <tbody style="text-align: center">
    <tr *ngFor="let row of productdata">
      <td scope="col pointer">
        <img
          id="printImgImg"
          src="{{ row?.imagee }}"
          height="100"
          width="100"
          class="table_img"
        />
      </td>
      <td id="printImgPN" class="productName">{{ row.name | uppercase }}</td>
      <td id="printImgPD" class="productName">
        {{ row?.variation?.dimension }}
      </td>
    </tr>
  </tbody>
</table>
