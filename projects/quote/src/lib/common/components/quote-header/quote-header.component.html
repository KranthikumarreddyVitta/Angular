<ng-template #dialog>
  <div class="dialog" fxLayout="column" fxLayoutAlign="center stretch">
    <h1 mat-dialog-title>Add Moodboard</h1>
    <mat-dialog-content>
      <mat-form-field appearance="outline">
        <mat-label>Choose an option</mat-label>
        <mat-select
          [(ngModel)]="selectedMoodboard"
          (selectionChange)="selectionChange()"
        >
          <ng-container *ngFor="let moodboard of moodboardList">
            <mat-option [value]="moodboard.sgid">{{
              moodboard.boardname
            }}</mat-option>
          </ng-container>

          <mat-option *ngIf="moodboardList.length === 0" value=""
            >No Moodboard</mat-option
          >
        </mat-select>
      </mat-form-field>
    </mat-dialog-content>
    <mat-dialog-actions fxLayout="row" fxLayoutAlign="center center">
      <button
        mat-flat-button
        color="accent"
        [disabled]="!selectedMoodboard"
        (click)="addMoodboard(selectedMoodboard)"
      >
        Add Moodboard
      </button>
    </mat-dialog-actions>
  </div>
</ng-template>

<div class="quote" fxLayout="column" fxLayoutAlign=" stretch">
  <div class="quote-details" fxLayout="row" fxLayoutAlign=" stretch">
    <div
      class="quote-details__icon"
      fxFlex="30"
      fxLayout="column"
      fxLayoutAlign="center center"
    >
      <span>{{ text }}</span>
      <img [src]="iconPath" alt="" srcset="" />
    </div>
    <div
      class="quote-details__info"
      fxFlex="60"
      fxLayout="row wrap"
      fxLayoutAlign="start"
    >
      <div fxFlex="66" *ngIf="quoteDetails?.order_reference">
        <span class="label">Order Number: </span>
        <span class="value">{{ quoteDetails.order_reference }}</span>
      </div>
      <div fxFlex="33">
        <span class="label">Project Name: </span>
        <span class="value">{{ quoteDetails.project_name }}</span>
      </div>
      <div fxFlex="33">
        <span class="label">Company Name: </span>
        <span class="value">{{ quoteDetails.company_name }}</span>
      </div>
      <div fxFlex="33">
        <span class="label">Address: </span>
        <span class="value">{{ quoteDetails.address }}</span>
      </div>
      <div fxFlex="33">
        <span class="label">Quote #: </span>
        <span class="value">{{ quoteDetails.sgid }}</span>
      </div>
      <div fxFlex="33">
        <span class="label">Contact No: </span>
        <span class="value">{{ quoteDetails.contactno }}</span>
      </div>
      <div fxFlex="33">
        <span class="label">State: </span>
        <span class="value">{{ quoteDetails.is_state_name }}</span>
      </div>
      <div fxFlex="33">
        <span class="label">Customer Name: </span>
        <span class="value">{{ quoteDetails.name }}</span>
      </div>
      <div fxFlex="33">
        <span class="label">Email: </span>
        <span class="value">{{ quoteDetails.email }}</span>
      </div>
      <div fxFlex="33">
        <span class="label">City: </span>
        <span class="value">{{ quoteDetails.city_name }}</span>
      </div>
      <div fxFlex="33">
        <span class="label">Zipcode: </span>
        <span class="value">{{ quoteDetails.is_zip_code }}</span>
      </div>
    </div>
    <div
      class="quote-details__copy"
      fxFlex="10"
      fxLayout="row"
      fxLayoutAlign="start end"
      fxLayoutGap="1rem"
    >
      <button
        mat-mini-fab
        color="accent"
        aria-label="Example icon button with a filter list icon"
      >
        <mat-icon>file_copy</mat-icon>
      </button>
      <button
        mat-mini-fab
        *ngIf="text === 'QUOTE' && editQuote"
        color="accent"
        (click)="OnEdit($event)"
      >
        <mat-icon>edit icon</mat-icon>
      </button>
    </div>
  </div>
  <mat-tab-group
    color="accent"
    class="tabs"
    (selectedTabChange)="onTabChanged($event)"
    mat-align-tabs="start"
  >
    <mat-tab label="Default Unit">
      <div fxLayout="column" class="tabs-item">
        <div class="quote-moodboard" fxLayout="column" fxLayoutAlign=" stretch">
          <div
            class="quote-moodboard__list"
            fxLayout="row"
            fxLayoutAlign="start"
            fxLayoutGap="1rem"
          >
            <div
              fxFlex="10"
              class="quote-moodboard__list--item moodboard-list"
              *ngFor="let moodboard of moodboards"
              fxLayout="column"
              fxLayoutAlign="center"
            >
              <i
                class="fa fa-trash"
                *ngIf="text === 'QUOTE' && editQuote"
                (click)="removeMDFromQuote(moodboard)"
                aria-hidden="true"
              ></i>
              <img
                fxFlex
                height="110px"
                width="auto"
                [src]="moodboard?.is_moodboard_images?.small"
                alt="Moodboard"
              />
              <p>{{ moodboard.moodboard_name }}</p>
            </div>
            <div
              fxFlex="10"
              class="quote-moodboard__list--item"
              fxLayoutAlign="center center"
              fxLayout="column"
              (click)="openDialog()"
              *ngIf="text === 'QUOTE' && editQuote"
            >
              <mat-icon class="icon" inline="true">add_circle_outline</mat-icon>
            </div>
          </div>
        </div>
        <div fxFlex="row" class="quote-moodboard--sec">
          <div
            fxLayout="column"
            fxFlex="20"
            fxLayoutGap="1rem"
            fxLayoutAlign="center center"
          >
            <div class="h2">1-BR-TEST-ORG</div>
            <button mat-flat-button color="accent">ADD TO FLOORPLAN</button>
            <button mat-flat-button color="accent">ADD TO UNIT</button>
            <button mat-flat-button color="primary">REMOVE MOODBOARD</button>
            <button mat-flat-button color="primary">GO TO MOODBOARD</button>
          </div>
          <mat-divider style="margin-right: 4rem" vertical="true"></mat-divider>
          <div
            fxFlex
            class="quote- sec"
            fxLayout="row"
            fxLayoutGap="3rem"
            fxLayoutAlign="start"
          >
            <div
              fxFlex="22"
              class="quote-moodboard__list--item moodboard-list"
              *ngFor="let moodboard of moodboards"
              fxLayout="column"
              fxLayoutGap=".5rem"
              fxLayoutAlign="start"
            >
              <lib-item-type style="width: 65px" [status]="0"></lib-item-type>
              <div fxFlex fxLayoutAlign="center center" fxLayout="column">
                <img
                  fxFlex
                  height="100px"
                  width="90px"
                  [src]="moodboard?.is_moodboard_images?.small"
                  alt="Moodboard"
                />
                <p class="h3">{{ moodboard.moodboard_name }}</p>
                <p>{{ "Qty :" + moodboard.is_moodboard_item_count }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </mat-tab>
    <mat-tab label="Floor Plans">
      <div class="g-box-shadow tabs-item fp">
        <span class="fp__default-text"
          >No Floor Plans found. Please add Floor Plan.</span
        >
        <div fxLayout="row" class="fp__container">
          <div
            fxLayout="column"
            fxLayoutGap="1rem"
            class="g-box-shadow fp__container--item"
          >
            <span
              fxLayout="row"
              fxLayoutGap="1rem"
              fxLayoutAlign="center center"
            >
              <button
                class="icon-button"
                mat-icon-button
                aria-label="Example icon button with a filter list icon"
              >
                <mat-icon>file_copy</mat-icon>
              </button>
              <button
                class="icon-button"
                mat-icon-button
                aria-label="Example icon button with a filter list icon"
              >
                <mat-icon>edit icon</mat-icon>
              </button>
            </span>
            <span fxLayout="column" style="align-items: center">
              <span class="h2">Test Floor Plan</span>
              <span>1 Moodboard</span>
              <span> 10 Units</span>
              <span>1 Bedroom</span>
            </span>
            <button mat-flat-button color="accent">SETUP</button>
          </div>
        </div>
        <div fxLayout="row" fxLayoutGap="2rem">
          <button mat-flat-button color="primary" (click)="openAddFloorPlanDialog()">ADD FLOOR PLAN </button>
          <button mat-flat-button color="primary">REMOVE FLOOR PLAN</button>
        </div>
      </div>
    </mat-tab>
    <mat-tab label="Floor plan Units">
      <div class="g-box-shadow tabs-item fpu">
        <span class="fpu__default-text">
          No Floor Plans found. Please add Floor Plan.
        </span>
        <div class="fpu__container g-box-shadow">
          <span class="h2">Test Floor Plan</span>
          <div fxLayout="row" fxLayoutGap="1rem">
            <div fxLayout="column" class="fpu__container--unit g-box-shadow">
              <i class="fa fa-times" aria-hidden="true"></i>
              <div class="h2">1</div>
              <div class="h3">Unit</div>
            </div>
          </div>
        </div>
        <div fxLayout="row" fxLayoutGap="2rem">
          <button mat-flat-button (click)="openAddUnitDialog()" color="primary">ADD UNIT(S)</button>
          <button mat-flat-button color="primary">REMOVE UNIT(S)</button>
          <span fxFlex></span>
          <mat-checkbox color="accent"> UNASSIGNED</mat-checkbox>
        </div>
      </div>
    </mat-tab>
  </mat-tab-group>

  <div class="quote-summary" fxLayout="column" fxLayoutAlign="start stretch">
    <div
      class="quote-summary__info"
      fxLayout="row"
      fxLayoutAlign="start start"
      fxLayoutGap="2rem"
    >
      <div>
        <span class="quote-summary__info--label">Customer City :</span>
        <span class="quote-summary__info--value">
          {{ quoteDetails.city_name }}</span
        >
      </div>
      <div>
        <span class="quote-summary__info--label">Zipcode:</span>
        <span class="quote-summary__info--value">{{
          quoteDetails.is_zip_code
        }}</span>
      </div>
    </div>
    <ag-grid-angular
      [gridOptions]="gridOptions"
      style="height: 600px; width: 100%"
      class="ag-theme-alpine quotes-table"
      [rowData]="rowData | async"
      [frameworkComponents]="frameworkComponents"
      [pinnedBottomRowData]="pinnedBottomRowData"
      [defaultColDef]="defaultColDef"
      [columnDefs]="columnDefs"
    >
    </ag-grid-angular>
    <div
      class="quote-summary__actions"
      fxLayout="row"
      fxLayoutAlign="center"
      fxLayoutGap="2rem"
    >
      <ng-content [select]="actions"> </ng-content>
    </div>
  </div>
</div>
